<%# Copyright 2011-2017 Frank Breedijk                                       %>
<%#                                                                          %>
<%# Licensed under the Apache License, Version 2.0 (the "License");          %>
<%# you may not use this file except in compliance with the License.         %>
<%# You may obtain a copy of the License at                                  %>
<%#                                                                          %>
<%# http://www.apache.org/licenses/LICENSE-2.0                               %>
<%#                                                                          %>
<%# Unless required by applicable law or agreed to in writing, software      %>
<%# distributed under the License is distributed on an "AS IS" BASIS,        %>
<%# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. %>
<%# See the License for the specific language governing permissions and      %>
<%# limitations under the License.                                           %>
<% this.sort(function(a,b) { return a.name > b.name }); %>
<% if ( this.length == 0 ) { %>
    <% if ( includeNew ) { %>
        <option value=-2>Create new issue...</option>
    <% } %>
	<%== $.View('//seccubus/issue/select/views/error.ejs') %>
<% } else { %>
	<option selected value=-1 disabled=true>Select a issue...</option>
	<% if ( includeNew ) { %>
		<option value=-2>Create new issue...</option>
	<% } %>
	<% for(var i = 0; i < this.length ; i++) { %>
		<% if (! (openOnly && this[i].status != 1) ) { %>
			<option <%= this[i] %> value='<%= this[i].id %>'>
				<%== $.View('//seccubus/issue/select/views/issue.ejs', this[i] )%>
			</option>
		<% } %>
	<% } %>
<% } %>
